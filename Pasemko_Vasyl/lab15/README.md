## Львівський Національний Університет Природокористування
## Кафедра інформаційних систем та технологій



### Звіт про виконання лабораторної роботи №5
# "Рефакторинг програмного забезпечення"

| Виконав: Студент групи : ІТ-31 Пасемко Василь |
|-----------------------------------------------|
| Перевірив: Татомир Андрій                     |


**Мета роботи: познайомитися з основними принципами та найбільш поширеними техніками рефакторингу програмного забезпечення.**

**Завдання:**
- Дати загальний опис принципів рефакторингу
- Ознайомитися із основними техніками рефакторингу. 
- Познайомитися із поняттям “запахів коду”. 

## Рефакторинг коду

Рефакторинг — це процес покращення структури існуючого коду без зміни його зовнішньої поведінки. Мета рефакторингу — зробити код більш зрозумілим, простішим у підтримці, модульним і менш схильним до помилок.

**Принципи рефакторингу:**
- Мінімізація змін зовнішньої поведінки: фокус на покращенні внутрішньої структури.
- Ітеративність: рефакторинг виконується невеликими кроками, що спрощує перевірку результатів.
- Безпечність: обов'язкове використання тестів для підтвердження коректності змін.
- Пріоритет чистоти коду: орієнтація на видалення дублікатів, спрощення складних конструкцій і покращення читабельності.

## Техніки рефакторингу: 
- **Виділення методу (Extract Method)** : створення нового методу з частини коду, що виконує конкретне завдання.

- **Іменування змінних/методів (Rename Variable/Method)** : заміна незрозумілих назв на описові.

- **Об'єднання дублікатів (DRY - Don't Repeat Yourself)** : об'єднання повторюваного коду в один метод або клас.
- **Інкапсуляція полів (Encapsulate Field)** : забезпечення доступу до полів класу через геттери/сеттери.
- **Розділення великих класів (Split Class)** : поділ класу, який виконує кілька завдань, на менші класи з чіткою відповідальністю
- **Заміна магічних чисел (Replace Magic Number with Constant)** : заміна числових значень на зрозумілі константи.



### Переваги рефакторингу:

- Покращення якості коду
- Полегшення підтримки та тестування
- Підвищення продуктивності розробки

## Запахи коду

"Запахи коду" — це проблеми в коді, які сигналізують про необхідність рефакторингу. Ось деякі з поширених прикладів:


**Дублювання коду (Duplicate Code)**схожі фрагменти коду повторюються в різних місцях.

 **Довгі методи (Long Methods)**методи з великою кількістю рядків, що ускладнює їх розуміння.

**Великі класи (Large Class)**класи, які виконують надто багато завдань.


**Залежність від конкретної реалізації (Tight Coupling)**класи занадто тісно пов'язані, що ускладнює їх зміну.

**Погані назви (Poor Naming)** змінні або методи мають незрозумілі або неточні назви

**Непотрібна складність (Unnecessary Complexity)**використання складних конструкцій там, де можна застосувати простіше рішення.


## Як забезпечити збереження функціоналу під час рефакторингу
- Покриття тестами: створення або перевірка існуючих юніт-тестів перед рефакторингом.
- Маленькі кроки: зміни вносяться поступово, з постійною перевіркою працездатності.
- Інструменти автоматизованого тестування: використання CI/CD для перевірки регресій.
- Резервне копіювання: збереження початкового стану коду (через систему контролю версій, наприклад, Git).
- Рефакторинг лише однієї ділянки: фокус на невеликій частині функціоналу, а не на глобальних змінах.
## Опис програми

Цей приклад демонструє, як складний і заплутаний код може ускладнити підтримку та розуміння. Вся логіка програми, включаючи управління товарами, обробку фінансів та виведення інформації, зосереджена в одному великому класі. Це призводить до дублювання коду, складності в тестуванні та високої ймовірності помилок. Така структура ускладнює внесення змін, оскільки будь-яка модифікація може вплинути на інші частини програми, що робить код важким для підтримки та розширення.

[Приклад рефакторингу](main.py)

## Висновки

Аналіз рефакторингу коду підкреслив важливість покращення його структури без зміни функціональності. Використані техніки, такі як виділення методів, усунення дублювань та покращення назв, показали, як зробити код більш зрозумілим і легким для підтримки. Крім того, розглянуті "запахи коду" та методи забезпечення стабільності функціоналу під час рефакторингу, що акцентує увагу на важливості тестування та поступового внесення змін.