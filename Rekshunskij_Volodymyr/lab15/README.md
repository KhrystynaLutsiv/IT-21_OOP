## Львівський Національний Університет Природокористування
## Кафедра Інформаційних систем та Технологій



### Звіт про виконання лабораторної роботи №15
# "Рефакторинг програмного забезпечення"



| Виконав: студент групи ІТ-31 Рекшинський Володимир |
|----------------------------------------------------|
| **Перевірив: Татомир А. В.**                       |



**Мета: познайомитися з основними принципами та 
найбільш пошириними техніками рефакторингу програмного
забезпечення**


Завдання

1. Дати загальний опис принципів рефакторингу.
2. Ознайомитися із основними техніками рефакторингу.
3. Познайомитися із поняттям "запахів коду"


  **Опис принципів рефакторингу**


Рефакторинг — це процес покращення внутрішньої структури програмного коду без зміни його зовнішньої поведінки. Основна мета рефакторингу — зробити код зрозумілішим, простішим для обслуговування, більш надійним та легким для тестування.

Читабельність: Код має бути зрозумілим для інших розробників, які з ним працюватимуть. Це досягається шляхом використання зрозумілих імен змінних, функцій і класів, а також організації коду в логічні блоки.

Модульність: Код повинен бути розбитий на невеликі, незалежні частини, кожна з яких виконує одну конкретну задачу (принцип "одна відповідальність"). Це покращує повторне використання та тестованість коду.

Уникання дублювання: Дуже важливо уникати дублювання коду, оскільки воно збільшує складність підтримки програми та може призвести до помилок. Рефакторинг включає в себе видалення дублювання та використання спільних методів або класів.

Масштабованість: Код має бути гнучким і готовим до розширення. Це означає, що при рефакторингу важливо забезпечити можливість легкого додавання нових функцій без значних змін в уже існуючій логіці.

Тестованість: Рефакторинг не повинен порушувати існуючі функціональні можливості програми. Тому перед рефакторингом важливо мати тестування або хоча б провести його після змін для перевірки, чи не з'явились нові помилки.

Простота: Код має бути простим і зрозумілим. Це включає в себе видалення зайвих складностей, таких як надмірна абстракція чи ускладнені алгоритми, що можуть зробити код важким для розуміння і підтримки.

Поступовість: Рефакторинг повинен проводитися поступово. Рекомендується вносити зміни невеликими порціями, перевіряючи кожен етап за допомогою тестів, щоб уникнути ризику великих помилок.


  **Основні техніки рефакторингу**


Видалення дублювання (Eliminate Duplication):
Об'єднання повторюваних фрагментів коду в окремі функції або класи.
Використання шаблонів проектування для зменшення дублювання.

Заміна магічних чисел на константи (Replace Magic Numbers with Constants):
Магічні числа або рядки замінюються на описові константи, щоб полегшити розуміння коду.
Зменшення розміру функцій і методів (Reduce Method Size):

Великі функції і методи розбиваються на менші, більш зрозумілі частини, що виконують одну задачу.

Заміна умовних операторів на поліморфізм (Replace Conditional with Polymorphism):
В складних умовах можна використовувати поліморфізм замість численних умовних операторів.

Покращення імен змінних, функцій та класів (Improve Variable, Function, and Class Names):
Використання описових імен, щоб було зрозуміло, що робить кожна змінна, функція чи клас.

Видалення непотрібних кодів та коментарів (Remove Dead Code and Comments):
Видалення коду, який не використовується, або коментарів, які не додають додаткової інформації.

Заміна імперативного коду на декларативний (Replace Imperative with Declarative):
Впровадження більш декларативного стилю коду, де описуються лише результати, а не кроки реалізації.

Інкапсуляція змінних (Encapsulate Field):
Заміна публічних змінних на приватні з доступом через геттери та сеттери.

Виділення класів та методів (Extract Class and Method):
Створення нових класів або методів для полегшення підтримки коду та покращення читабельності.

Спрощення умов (Simplify Conditional Expressions):
Спрощення складних логічних виразів для кращої зрозумілості та зменшення помилок.

Замінювання великої кількості параметрів на об'єкти (Replace Parameter with Object):
Заміна численних параметрів на об'єкти, які групують їх, що зменшує кількість параметрів у методах.


  **Запахи коду**

Поняття "запахів коду" (code smells) описує ситуації в програмному коді, які можуть свідчити про потенційні проблеми або недоліки, хоча й не є обов'язково помилками. 
Запахи коду можуть бути проявами неправильної архітектури, надмірної складності, непослідовності або непотрібної дубльованої логіки.

Дублювання коду (Duplicated Code): Якщо одна й та сама логіка повторюється в кількох місцях, це ускладнює підтримку коду, оскільки будь-яка зміна потребує оновлення в кількох місцях.

Занадто довгі методи (Long Method): Якщо метод надто довгий, це може вказувати на те, що його слід розбити на кілька менших, більш спеціалізованих методів, щоб підвищити читабельність і зручність для тестування.

Занадто великі класи (Large Class): Клас, який робить занадто багато речей, може бути важким для розуміння та супроводження. Це може бути ознакою того, що клас повинен бути розділений на декілька, кожен із яких має чітку відповідальність.

Магічні числа (Magic Numbers): Використання чисел прямо в коді без пояснення їхнього значення. Це ускладнює розуміння, чому саме це значення використовується. Краще використовувати константи з описовими іменами.

Невикористовувані змінні (Unused Variables): Якщо змінна оголошена, але не використовується в коді, це може вказувати на зайву складність або помилку, яку потрібно виправити.

Глибокі вкладеності (Deep Nesting): Вкладеність умов (наприклад, кілька рівнів if або циклів) може зробити код важким для розуміння і підтримки. Таке часто вказує на те, що логіку можна спростити.

Невідповідні імена (Inappropriate Naming): Імена змінних, методів чи класів, які не пояснюють їх призначення, можуть збільшити складність читання коду.


**Опис [коду](./user_role.py)**

Проблеми: Код громіздкий через багато умов if-elif.
Додавання нових ролей потребує модифікації коду.
Реалізація:
Словник role_access:
Ключі словника — ролі користувачів ('admin', 'editor', 'viewer').
Значення словника — відповідні повідомлення про доступ для кожної ролі.
Метод .get() намагається отримати значення за вказаним ключем (user.role).
якщо ключ не знайдено, повертається значення за замовчуванням ('Access denied').
Переваги цієї реалізації:
Мінімізація коду: код виглядає набагато коротшим і зручнішим.
Легке додавання нових ролей: Щоб додати нову роль, потрібно просто додати новий запис у словник.


  ## Висновки. 
Ми навчились розуміти принципи рефакторингу, такі як читабельність, модульність, уникання дублювання, масштабованість, тестованість, простота та поступовість змін.
Використовувати основні техніки рефакторингу, включаючи видалення дублювання, заміну магічних чисел на константи, спрощення умов і методів, а також заміну умовних операторів на поліморфізм.
Ідентифікувати запахи коду, такі як дублювання, довгі методи, великі класи, магічні числа і невикористовувані змінні, і вчасно їх усувати.
Проводити рефакторинг для покращення структури коду, підвищення його читабельності, простоти підтримки та тестованості.
Приймати необхідність поступового рефакторингу для забезпечення стабільності і мінімізації помилок у програмі.
