## Львівський Національний Університет Природокористування
## Кафедра Інформаційних систем та Технологій



### Звіт про виконання лабораторної роботи №15
# Рефакторинг програмного забезпечення"



| Виконав: студент групи ІТ-31 Ігор Швець      |
|----------------------------------------------|
| **Перевірив: Татомир А. В.**                 |




**Мета познайомитися з основними принципами та найбільш поширеними техніками рефакторингу програмного забезпечення.**


Завдання

1. Дати загальний опис принципів рефакторингу.
2. Ознайомитися із основними техніками рефакторингу.
3. Познайомитися із поняттям “запахів коду”.

**Дати загальний опис принципів рефакторингу.**

Загальний опис принципів рефакторингу
Рефакторинг — це процес покращення структури коду без зміни його зовнішньої поведінки. Основною метою рефакторингу є підвищення якості коду, щоб зробити його більш зрозумілим, підтримуваним та простим для розширення.

Основні принципи рефакторингу:
Збереження функціональності:

Рефакторинг не повинен змінювати функціональну поведінку програми. Всі існуючі функції мають працювати так само, як до початку змін.
Покращення читабельності:

Код має бути зрозумілим для інших розробників. Добре написаний код легше аналізувати, тестувати та модифікувати.
Мінімізація складності:

Усунення зайвої складності робить систему простішою для розуміння та зменшує кількість можливих помилок.
Усунення дублювання:

Рефакторинг зосереджений на видаленні повторюваних частин коду, що спрощує його структуру.
Поліпшення модульності:

Код розділяється на невеликі, незалежні частини, що робить систему більш гнучкою.
Підтримка тестів:

Рефакторинг зазвичай проводиться разом із написанням або оновленням тестів, щоб гарантувати, що поведінка програми не змінюється.
Покращення дизайну коду:

Рефакторинг спрямований на дотримання принципів проектування, таких як KISS, DRY, SOLID тощо, що робить код більш організованим.
Коли застосовувати рефакторинг:
Перед додаванням нового функціоналу: щоб уникнути ускладнень через погану архітектуру.
Під час виправлення помилок: для покращення розуміння проблемного коду.
При виявленні "запахів коду": якщо код стає важким для розуміння або підтримки.
Рефакторинг — це не одноразова дія, а безперервний процес, що підтримує якість програмного забезпечення протягом усього його життєвого циклу.

**Опис [коду](./code.py)**

1. Витягнення методу (Extract Method)
Опис: Розділяє великий метод на кілька менших, щоб покращити читабельність і зменшити складність.
Приклад: Метод process_order викликає два інші методи: calculate_total і print_receipt, які обробляють окремі аспекти замовлення. Це дозволяє зберігати кожен метод маленьким і зрозумілим.
2. Інлайнування методу (Inline Method)
Опис: Якщо метод занадто простий і не додає значної абстракції, можна його інлайнити, тобто замінити його в коді прямим виразом.
Приклад: Метод get_discount() був замінений на пряме значення 5, оскільки його виконання надто просте.
3. Перейменування (Rename)
Опис: Перейменування методів, змінних чи класів для підвищення їхньої зрозумілості.
Приклад: Метод calc був перейменований на calculate_discount, що робить його призначення більш очевидним.
4. Поділ класу (Extract Class)
Опис: Розділяє великий клас на кілька менших, кожен з яких має чітко визначену відповідальність.
Приклад: Клас Order, який містить дані замовлення, і клас Payment, який обробляє платежі, були виділені в окремі класи.
5. Усунення дублювання коду (Remove Duplicated Code)
Опис: Усуває дубльовані фрагменти коду, щоб зменшити його обсяг і складність.
Приклад: Функція apply_discount використовується як для обчислення знижки, так і для обчислення остаточної ціни, що усуває дублювання коду.
6. Інкапсуляція полів (Encapsulate Field)
Опис: Перетворює поля класу на приватні та надає доступ до них через методи геттерів і сеттерів.
Приклад: В класі Order поле _price стало інкапсульованим і доступ до нього відбувається через методи get_price і set_price.
7. Спрощення умовних конструкцій (Simplify Conditional Expressions)
Опис: Заміна складних умовних виразів простішими.
Приклад: Перевірка, чи є користувач адміністратором, була спрощена до одного рядка access = user["is_admin"], що робить код більш читабельним.
8. Замінення умовного поліморфізмом (Replace Conditional with Polymorphism)
Опис: Використовує поліморфізм замість умовних операторів для зменшення складності коду і полегшення його масштабування.
Приклад: Класи PayPalPayment і CreditCardPayment реалізують загальний інтерфейс PaymentMethod, що дозволяє обробляти різні методи платежів без умовних конструкцій.
9. Декомпозиція довгих методів (Decompose Long Methods)
Опис: Розділяє великі методи на кілька малих, щоб кожен метод мав одну відповідальність.
Приклад: Метод process_transaction розбитий на три окремі методи: validate_order, charge_payment, та send_confirmation. Це дозволяє кожному методу бути більш зосередженим на окремій задачі.




## Висновки. 

Виконання завдання з рефакторингу дозволяє значно покращити структуру та якість коду. Використовуючи основні техніки рефакторингу, ми досягаємо таких результатів:
Покращення читабельності та розуміння коду – Техніки, такі як витягнення методів та перейменування змінних і функцій, роблять код більш зрозумілим для інших розробників. Це дозволяє легко зрозуміти, що робить кожен окремий блок коду.
Зменшення складності – Техніки, як-от спрощення умовних конструкцій та декомпозиція довгих методів, допомагають зменшити загальну складність коду, що полегшує його підтримку та масштабування.
Покращення структури коду – За допомогою поділу класів та замінення умовного поліморфізмом ми можемо розділити відповідальність між окремими класами та методами, що допомагає створити більш гнучкий і розширюваний код.
Усунення дублювання – Техніка усунення дублювання коду дозволяє уникнути повторення однакових частин коду, що знижує ризик помилок і робить програму менш схильною до неузгодженостей.
Підвищення модульності та інкапсуляції – Інкапсуляція полів у класах дозволяє забезпечити більшу безпеку і контроль над доступом до внутрішніх змінних, що робить програму більш надійною.
У результаті застосування рефакторингу код стає не тільки більш зрозумілим, але й більш стабільним, гнучким і зручним для подальшого розвитку. Це дозволяє знижувати вартість супроводу програми та покращує її довговічність, оскільки робить систему більш стійкою до змін.